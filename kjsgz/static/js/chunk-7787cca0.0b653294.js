(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7787cca0"],{"02f4":function(t,e,a){var i=a("4588"),n=a("be13");t.exports=function(t){return function(e,a){var r,o,s=String(n(e)),l=i(a),c=s.length;return l<0||l>=c?t?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):r:t?s.slice(l,l+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var i=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?i(t,e).length:1)}},"0a49":function(t,e,a){var i=a("9b43"),n=a("626a"),r=a("4bf8"),o=a("9def"),s=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,d=6==t,p=5==t||d,f=e||s;return function(e,s,m){for(var g,h,v=r(e),b=n(v),y=i(s,m,3),w=o(b.length),_=0,x=a?f(e,w):l?f(e,0):void 0;w>_;_++)if((p||_ in b)&&(g=b[_],h=y(g,_,v),t))if(a)x[_]=h;else if(h)switch(t){case 3:return!0;case 5:return g;case 6:return _;case 2:x.push(g)}else if(u)return!1;return d?-1:c||u?u:x}}},"0a9e":function(t,e,a){"use strict";var i=a("7954"),n=a.n(i);n.a},"0bfb":function(t,e,a){"use strict";var i=a("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1169:function(t,e,a){var i=a("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"11e9":function(t,e,a){var i=a("52a7"),n=a("4630"),r=a("6821"),o=a("6a99"),s=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=r(t),e=o(e,!0),l)try{return c(t,e)}catch(a){}if(s(t,e))return n(!i.f.call(t,e),t[e])}},"20d6":function(t,e,a){"use strict";var i=a("5ca1"),n=a("0a49")(6),r="findIndex",o=!0;r in[]&&Array(1)[r](function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"214f":function(t,e,a){"use strict";a("b0c5");var i=a("2aba"),n=a("32e9"),r=a("79e5"),o=a("be13"),s=a("2b4c"),l=a("520a"),c=s("species"),u=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var p=s(t),f=!r(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),m=f?!r(function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[c]=function(){return a}),a[p](""),!e}):void 0;if(!f||!m||"replace"===t&&!u||"split"===t&&!d){var g=/./[p],h=a(o,p,""[t],function(t,e,a,i,n){return e.exec===l?f&&!n?{done:!0,value:g.call(e,a,i)}:{done:!0,value:t.call(a,e,i)}:{done:!1}}),v=h[0],b=h[1];i(String.prototype,t,v),n(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},2953:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"adminIndex"},[a("div",{staticClass:"font-13 mb-12 bold flex flex-justify-space-between flex-align-center"},[a("span",[t._v("全盘账管理")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addCompany}},[t._v("企业新增")])],1),t.companyData.length>0?a("div",[a("div",{staticClass:"header flex flex-justify-space-between font-13"},[a("span",{staticClass:"bold"},[a("span",[t._v("企业名称：")]),a("span",[t._v(t._s(t.companyData[0]["trade_name"]))])]),a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.subject(t.companyData[0].id)}}},[t._v("科目设置")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addBusiness(t.companyData[0].id)}}},[t._v("新增业务")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.toSaveAnswer(t.companyData[0].id)}}},[t._v("答案绑定")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.editCompany(t.companyData[0])}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.delCompany(t.companyData[0].id)}}},[t._v("删除")])],1)]),a("div",[a("el-table",{staticClass:"mb-12",staticStyle:{width:"100%"},attrs:{size:"mini",data:t.companyData[0]["business"],border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"业务摘要",width:"",align:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n            "+t._s(a.abstract)+"\n          ")]}}],null,!1,1339650239)}),a("el-table-column",{attrs:{label:"业务内容",width:"",align:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n            "+t._s(a.content)+"\n          ")]}}],null,!1,2128899478)}),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.editBusiness(i,t.companyData[0]["id"])}}},[t._v("\n              编辑\n            ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.delBusiness(i,t.companyData[0]["id"])}}},[t._v("\n              删除\n            ")])]}}],null,!1,2582318464)})],1),a("el-pagination",{staticClass:"text-center",attrs:{small:"",layout:"prev, pager, next","page-size":t.pageQuery.page_size,"current-page":t.pageQuery.page,total:t.total},on:{"current-change":t.changePageIndex}})],1)]):a("div",{staticClass:"text-center font-13 col-9"},[t._v("\n    暂无数据\n  ")]),t.dialogSubjectVisible?a("div",[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"subject-dialog",attrs:{width:"450px",modal:!1,"close-on-click-modal":!1,title:"科目管理",visible:t.dialogSubjectVisible},on:{"update:visible":function(e){t.dialogSubjectVisible=e},dragDialog:t.handleSubjectDrag}},[a("div",{ref:"subjectDiv"},[a("Subject",{attrs:{"company-id":t.companyId,data:t.subjectData}})],1)])],1):t._e(),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"company-dialog",attrs:{width:"900px",modal:!1,"close-on-click-modal":!1,title:"企业管理",visible:t.dialogCompanyVisible},on:{"update:visible":function(e){t.dialogCompanyVisible=e},dragDialog:t.handleCompanyDrag}},[a("div",{staticStyle:{height:"600px","overflow-y":"auto",padding:"20px"}},[a("el-form",{ref:"companyForm",attrs:{rules:t.companyRules,model:t.companyFormData,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"企业名称",prop:"trade_name"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.companyFormData.trade_name,callback:function(e){t.$set(t.companyFormData,"trade_name",e)},expression:"companyFormData.trade_name"}})],1),a("el-form-item",{attrs:{label:"背景信息"}},[a("quill-editor",{attrs:{options:t.editorOption},model:{value:t.companyFormData.material,callback:function(e){t.$set(t.companyFormData,"material",e)},expression:"companyFormData.material"}})],1),a("el-form-item",{attrs:{label:"期初余额表"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","file-list":t.listQiChu,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)],1),a("div",{ref:"divCompany",staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.saveCompany("companyForm")}}},[t._v("\n        确定\n      ")]),a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(e){t.dialogCompanyVisible=!1}}},[t._v("\n        返回\n      ")])],1)]),t.dialogBusinessVisible?a("div",[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"business-dialog",attrs:{width:"900px",modal:!1,"close-on-click-modal":!1,title:"业务管理",visible:t.dialogBusinessVisible},on:{"update:visible":function(e){t.dialogBusinessVisible=e},dragDialog:t.handleBusinessDrag}},[a("div",{ref:"businessDiv"},[a("Business",{attrs:{"company-id":t.companyId,"business-data":t.businessData},on:{save:t.saveBusiness}})],1)])],1):t._e()],1)},n=[],r=(a("ac6a"),a("a481"),a("6762"),a("2fdb"),{bind:function(t,e,a){var i=t.querySelector(".el-dialog__header"),n=t.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var r=function(){return window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]}}();i.onmousedown=function(t){var e=t.clientX-i.offsetLeft,o=t.clientY-i.offsetTop,s=n.offsetWidth,l=n.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=n.offsetLeft,p=c-n.offsetLeft-s,f=n.offsetTop,m=u-n.offsetTop-l,g=r(n,"left"),h=r(n,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(t){var i=t.clientX-e,r=t.clientY-o;-i>d?i=-d:i>p&&(i=p),-r>f?r=-f:r>m&&(r=m),n.style.cssText+=";left:".concat(i+g,"px;top:").concat(r+h,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}}),o=function(t){t.directive("el-drag-dialog",r)};window.Vue&&(window["el-drag-dialog"]=r,Vue.use(o)),r.install=o;var s=r,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"subject"},[a("div",{staticStyle:{height:"300px","overflow-y":"auto"}},[a("el-tree",{attrs:{data:t.subjectData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,n=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(n.title))]),a("span",[a("i",{staticClass:"el-icon-circle-plus-outline tree-icon-blue ml-3",style:"1"===n.level?"margin-right:34px":"",on:{click:function(){return t.addSubject(n)}}}),"1"!==n.level?a("i",{staticClass:"el-icon-edit-outline tree-icon-orange ml-3",on:{click:function(e){return t.editSubject(n)}}}):t._e(),"1"!==n.level?a("i",{staticClass:"el-icon-circle-close tree-icon-red ml-3",on:{click:function(e){return t.delSubject(i,n)}}}):t._e()])])}}])})],1),a("div",{staticClass:"text-right",staticStyle:{padding:"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存")])],1),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"subject-detail-dialog",attrs:{width:"400px",modal:!1,"close-on-click-modal":!1,title:"科目管理",visible:t.dialogSubjectVisible},on:{"update:visible":function(e){t.dialogSubjectVisible=e},dragDialog:t.handleSubjectDrag}},[a("el-form",{ref:"subjectForm",attrs:{rules:t.subjectRules,model:t.subjectFormData,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"科目名称",prop:"title"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:t.subjectFormData.title,callback:function(e){t.$set(t.subjectFormData,"title",e)},expression:"subjectFormData.title"}})],1)],1),a("div",{ref:"divSubject",staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveAddSubject("subjectForm")}}},[t._v("\n        确定\n      ")]),a("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.dialogSubjectVisible=!1}}},[t._v("\n        返回\n      ")])],1)],1)],1)},c=[],u=(a("20d6"),a("c5f6"),{name:"Subject",directives:{elDragDialog:s},props:{companyId:{type:Number,required:!0,defaults:0},data:{type:Array,required:!0,defaults:[]}},data:function(){return{subjectData:[],dialogSubjectVisible:!1,subjectFormData:{id:"",title:"",parent_id:"",level:""},subjectRules:{title:[{required:!0,message:"请填写科目名称",trigger:"blur"}]},handleData:[],handleIndex:0,resultData:[],resultId:0}},computed:{basicKeMu:function(){return this.$store.state.basicKeMu}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.subjectData=this.$store.state["basicKeMu"],this.data.length>0&&this.subjectData.forEach(function(e){var a=t.getTree(t.data,e.id);a.length>0&&t.$set(e,"children",a)}),this.resultId=this.subjectData.concat(this.data).length+1,this.resetBasicKeMu()},getTree:function(t,e){var a=this,i=[];return t.forEach(function(n){if(n.parent_id===e){var r={id:n.id,title:n.title,parent_id:n.parent_id,level:n.level,children:a.getTree(t,n.id)};i.push(r)}}),i},addSubject:function(t){var e=this;this.subjectFormData={id:"",title:"",parent_id:"",level:""},this.handleData=t,this.subjectData.forEach(function(a,i){a===t&&(e.handleIndex=i)}),this.dialogSubjectVisible=!0},editSubject:function(t){this.subjectFormData=t,this.handleData=t,this.dialogSubjectVisible=!0},saveAddSubject:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if(e.subjectFormData.id&&""!==e.subjectFormData.id)e.$set(e.handleData,"title",e.subjectFormData.title);else{var a={id:e.resultId,title:e.subjectFormData.title,parent_id:e.handleData.id,level:parseInt(e.handleData.level)+1};e.handleData.children||e.$set(e.handleData,"children",[]),e.handleData.children.push(a),e.resultId+=1}e.dialogSubjectVisible=!1}})},save:function(){var t=this;this.resultData=[],this.subjectData.forEach(function(e){e.children&&t.handleChildren(e.children)}),window.axios.post("".concat(window.adminHost,"/admin/manual/company/add"),{id:this.companyId,subject:JSON.stringify(this.resultData)}).then(function(e){var a=e.data;a.error_code?t.$message.error("保存失败"):t.$message.success("保存成功")}).catch(function(t){console.log(t)})},delSubject:function(t,e){this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=t.parent,i=a.data.children||a.data,n=i.findIndex(function(t){return t.id===e.id});i.splice(n,1)}).catch(function(){console.log("cancel")})},handleSubjectDrag:function(){this.$refs["divSubject"].blur()},handleChildren:function(t){var e=this;if(!(t&&t.length>0))return!1;t.forEach(function(t){e.resultData.push({id:t.id,title:t.title,parent_id:t.parent_id,level:t.level}),e.handleChildren(t.children)})},resetBasicKeMu:function(){this.$store.commit("SAVE_BASIC_KE_MU",this.returnBasicKeMu())},returnBasicKeMu:function(){return[{id:1,title:"库存现金",parent_id:"0",level:"1"},{id:2,title:"银行存款",parent_id:"0",level:"1"},{id:3,title:"应收票据",parent_id:"0",level:"1"},{id:4,title:"应收账款",parent_id:"0",level:"1"},{id:5,title:"其他应收款",parent_id:"0",level:"1"},{id:6,title:"原材料",parent_id:"0",level:"1"},{id:7,title:"库存商品",parent_id:"0",level:"1"},{id:8,title:"周转材料",parent_id:"0",level:"1"},{id:9,title:"固定资产",parent_id:"0",level:"1"},{id:10,title:"累计折旧",parent_id:"0",level:"1"},{id:11,title:"短期借款",parent_id:"0",level:"1"},{id:12,title:"应付票据",parent_id:"0",level:"1"},{id:13,title:"应付账款",parent_id:"0",level:"1"},{id:14,title:"应付职工薪酬",parent_id:"0",level:"1"},{id:15,title:"应交税费",parent_id:"0",level:"1"},{id:16,title:"应付利润",parent_id:"0",level:"1"},{id:17,title:"其他应付款",parent_id:"0",level:"1"},{id:18,title:"盈余公积",parent_id:"0",level:"1"},{id:19,title:"本年利润",parent_id:"0",level:"1"},{id:20,title:"利润分配",parent_id:"0",level:"1"},{id:21,title:"生产成本",parent_id:"0",level:"1"},{id:22,title:"制造费用",parent_id:"0",level:"1"},{id:23,title:"主营业务收入",parent_id:"0",level:"1"},{id:24,title:"其他业务收入",parent_id:"0",level:"1"},{id:25,title:"营业外收入",parent_id:"0",level:"1"},{id:26,title:"主营业务成本",parent_id:"0",level:"1"},{id:27,title:"税金及附加",parent_id:"0",level:"1"},{id:28,title:"销售费用",parent_id:"0",level:"1"},{id:29,title:"管理费用",parent_id:"0",level:"1"},{id:30,title:"财务费用",parent_id:"0",level:"1"},{id:31,title:"所得税费用",parent_id:"0",level:"1"},{id:32,title:"营业外支出",parent_id:"0",level:"1"},{id:33,title:"实收资本",parent_id:"0",level:"1"},{id:34,title:"应付利息",parent_id:"0",level:"1"},{id:35,title:"其他业务成本",parent_id:"0",level:"1"}]}}}),d=u,p=(a("2c7b"),a("6a3f"),a("2877")),f=Object(p["a"])(d,l,c,!1,null,"9f8d22c8",null),m=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"business"},[a("el-form",{ref:"businessForm",attrs:{rules:t.rules,model:t.formData,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"业务摘要",prop:"abstract"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:t.formData.abstract,callback:function(e){t.$set(t.formData,"abstract",e)},expression:"formData.abstract"}})],1),a("el-form-item",{attrs:{label:"业务说明",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请填写业务说明",clearable:"",size:"mini"},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),a("el-form-item",{attrs:{label:"原始资料上传",prop:"sort"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","file-list":t.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-form-item",{attrs:{label:"原始资料名称",prop:""}},[t.formData.resource&&t.formData.resource.length>0?a("div",t._l(t.formData.resource,function(e,i){return a("div",{key:i,staticClass:"flex flex-align-center"},[a("el-input",{attrs:{placeholder:"请填写原始资料名称",clearable:"",size:"mini"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}}),a("span",{staticClass:"ml-5"},[a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(e){return t.delMaterial(i)}}},[t._v("删除")])],1)],1)}),0):t._e(),a("div",[a("el-button",{attrs:{size:"mini",plain:"",icon:"el-icon-plus"},on:{click:t.addMaterial}},[t._v("添加一条原始资料")])],1)]),a("el-form-item",{attrs:{label:"文字解析",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请填写文字解析",clearable:"",size:"mini"},model:{value:t.formData.textParse,callback:function(e){t.$set(t.formData,"textParse",e)},expression:"formData.textParse"}})],1),a("el-form-item",{attrs:{label:"视频解析",prop:"sort"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveBusiness("businessForm")}}},[t._v("保存")])],1)],1)],1)},h=[],v={name:"Business",props:{companyId:{type:Number,required:!0,defaults:0},businessData:{type:Object,required:!0,defaults:{}}},data:function(){return{formData:{abstract:"",content:"",resource:[{url:"",name:""}],textParse:"",videoParse:""},imageUrl:[],rules:{abstract:[{required:!0,message:"请填写业务摘要",trigger:"blur"}],number:[{required:!0,message:"请填写编号",trigger:"blur"}]},fileList:[]}},created:function(){this.initData()},methods:{initData:function(){"{}"!==JSON.stringify(this.businessData)?(this.formData={id:this.businessData.id,abstract:this.businessData.abstract,content:this.businessData.content,resource:JSON.parse(this.businessData.resource),textParse:this.businessData.textParse,videoParse:this.businessData.videoParse},this.formData.resource.length>0&&(this.fileList=this.formData.resource)):this.formData={abstract:"",content:"",resource:[{url:"",name:""}],textParse:"",videoParse:""}},addMaterial:function(){this.formData.resource.push({url:"",name:""})},delMaterial:function(t){this.formData.resource.length>1?this.formData.resource.splice(t,1):this.$message.warning("至少保留一条原始资料")},saveBusiness:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a={trade_id:e.companyId,abstract:e.formData.abstract,content:e.formData.content,resource:JSON.stringify(e.formData.resource),textParse:e.formData.textParse,videoParse:e.formData.videoParse};e.formData.id&&(a.id=e.formData.id),window.axios.post("".concat(window.adminHost,"/admin/manual/business"),a).then(function(t){var a=t.data;a.error_code?e.$message.error("保存失败"):(e.$message.success("保存成功"),e.$emit("save"))}).catch(function(t){console.log(t)})}})}}},b=v,y=(a("0a9e"),Object(p["a"])(b,g,h,!1,null,"95ae5d26",null)),w=y.exports,_=a("953d");const x={watcher:{},active:null,on:function(t,e){this.watcher[t]||(this.watcher[t]=e)},emit:function(t,e=1){this.active=this.watcher[t],1===e&&j()}};class D{constructor(t,e={}){this.id=Math.random(),this.quill=t,this.quill.id=this.id,this.config=e,this.file="",this.imgURL="",t.root.addEventListener("paste",this.pasteHandle.bind(this),!1),t.root.addEventListener("drop",this.dropHandle.bind(this),!1),t.root.addEventListener("dropover",function(t){t.preventDefault()},!1),this.cursorIndex=0,x.on(this.id,this)}pasteHandle(t){x.emit(this.quill.id,0);let e,a,i,n=t.clipboardData,r=0;if(n){if(e=n.items,!e)return;for(a=e[0],i=n.types||[];r<i.length;r++)if("Files"===i[r]){a=e[r];break}if(a&&"file"===a.kind&&a.type.match(/^image\//i)){this.file=a.getAsFile();let t=this;if(t.config.size&&t.file.size>=1024*t.config.size*1024)return void(t.config.sizeError&&t.config.sizeError());this.config.action}}}dropHandle(t){x.emit(this.quill.id,0);const e=this;t.preventDefault(),e.config.size&&e.file.size>=1024*e.config.size*1024?e.config.sizeError&&e.config.sizeError():(e.file=t.dataTransfer.files[0],this.config.action?e.uploadImg():e.toBase64())}toBase64(){const t=this,e=new FileReader;e.onload=e=>{t.imgURL=e.target.result,t.insertImg()},e.readAsDataURL(t.file)}uploadImg(){const t=this;t.quillLoading;let e=t.config,a=new FormData;a.append(e.name,t.file),e.editForm&&e.editForm(a);let i=new XMLHttpRequest;i.open("post",e.action,!0),e.headers&&e.headers(i),e.change&&e.change(i,a),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){let a=JSON.parse(i.responseText);t.imgURL=e.response(a),x.active.uploadSuccess(),t.insertImg(),t.config.success&&t.config.success()}else t.config.error&&t.config.error(),x.active.uploadError()},i.upload.onloadstart=function(t){x.active.uploading(),e.start&&e.start()},i.upload.onprogress=function(t){let e=(t.loaded/t.total*100|0)+"%";x.active.progress(e)},i.upload.onerror=function(t){x.active.uploadError(),e.error&&e.error()},i.upload.onloadend=function(t){e.end&&e.end()},i.send(a)}insertImg(){const t=x.active;t.quill.insertEmbed(x.active.cursorIndex,"image",t.imgURL),t.quill.update(),t.quill.setSelection(t.cursorIndex+1)}progress(t){t="[uploading"+t+"]",x.active.quill.root.innerHTML=x.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,t)}uploading(){let t=(x.active.quill.getSelection()||{}).index||x.active.quill.getLength();x.active.cursorIndex=t,x.active.quill.insertText(x.active.cursorIndex,"[uploading...]",{color:"red"},!0)}uploadError(){x.active.quill.root.innerHTML=x.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"[upload error]")}uploadSuccess(){x.active.quill.root.innerHTML=x.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"")}}function j(){let t=document.querySelector(".quill-image-input");null===t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.classList.add("quill-image-input"),t.style.display="none",t.addEventListener("change",function(){let e=x.active;e.file=t.files[0],t.value="",e.config.size&&e.file.size>=1024*e.config.size*1024?e.config.sizeError&&e.config.sizeError():e.config.action?e.uploadImg():e.toBase64()}),document.body.appendChild(t)),t.click()}_["Quill"].register("modules/ImageExtend",D);var S={name:"AdminIndex",components:{Business:w,Subject:m},directives:{elDragDialog:s},data:function(){var t=this;return{activeName:"first",companyData:[],subjectData:[],businessData:{},dialogSubjectVisible:!1,companyId:0,dialogCompanyVisible:!1,companyRules:{trade_name:[{required:!0,message:"请填写企业名称",trigger:"blur"}]},companyFormData:{trade_name:"",material:"",qi_chu:""},pageQuery:{page:1,page_size:1},total:0,dialogBusinessVisible:!1,listQiChu:[],editorOption:{modules:{ImageExtend:{loading:!0,name:"file",size:1,action:window.host+"uploadEditorImg",response:function(e){if(1===e.status)return e.resultData;t.$message.error(e.info)},sizeError:function(){t.$message.error("图片尺寸最大为1M")},headers:function(e){e.setRequestHeader("token",t.$store.state.access_token_teacher)}},toolbar:{container:["bold","italic","underline",{script:"sub"},{script:"super"},"clean","image"],handlers:{image:function(){x.emit(this.quill.id)}}}}}}},created:function(){this.initData()},methods:{initData:function(){var t=this;window.axios.post("".concat(window.adminHost,"/admin/manual/company/list?page=").concat(this.pageQuery.page,"&&page_size=").concat(this.pageQuery.page_size)).then(function(e){var a=e.data;a.error_code?t.$message.error("请求失败"):(t.companyData=a.data.data,t.total=a.data.total,t.companyData[0]["subject"]&&""!==t.companyData[0]["subject"]?t.subjectData=JSON.parse(t.companyData[0]["subject"]):t.subjectData=[])}).catch(function(t){console.log(t)})},addCompany:function(){var t=this;this.companyFormData={trade_name:"",material:'<p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304102667327.jpg" title="1500255209245050.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304102492960.jpg" title="1500255209203102.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304102419714.jpg" title="1500255209925022.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304731358168.jpg" title="1500255257431719.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304731416762.jpg" title="1500255257394861.jpg"/></p><p><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304808298965.jpg" title="1500254541330256.jpg" alt="了解三：企业主要税收征收政策.jpg" style="white-space: normal;"/></p><p><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313849503003.jpg" title="1500254593418550.jpg" alt="了解四：账簿组织概述.jpg" style="white-space: normal;"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313883602407.jpg" title="1500686362155841.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313883498343.jpg" title="1500686367688571.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313883234030.jpg" title="1500686374617496.jpg"/></p><p><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313933589344.jpg" title="1500254873934369.jpg" alt="了解六：会计科目.jpg" style="white-space: normal;"/></p>',qi_chu:JSON.stringify(["/Uploads/ueImage/20181212/1544603457867972.jpg","/Uploads/ueImage/20181212/1544603462375950.jpg","/Uploads/ueImage/20181212/1544603466237929.jpg","/Uploads/ueImage/20181212/1544603473197232.jpg","/Uploads/ueImage/20181212/1544603477389145.jpg"])},this.dialogCompanyVisible=!0,this.$nextTick(function(){t.$refs["companyForm"].clearValidate()})},editCompany:function(t){var e=this;this.companyFormData=Object.assign(t);var a=[];this.companyFormData.qi_chu.length>0&&this.companyFormData.qi_chu.forEach(function(t){a.push({url:"http://www.wenyunjy.com:8081"+t,name:"期初余额表"})}),this.listQiChu=a,this.dialogCompanyVisible=!0,this.$nextTick(function(){e.$refs["companyForm"].clearValidate()})},delCompany:function(t){var e=this;this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.axios.delete("".concat(window.adminHost,"/admin/manual/company/del/").concat(t)).then(function(t){var a=t.data;a.error_code?e.$message.error("删除失败"):(e.$message.success("删除成功"),e.pageQuery.page=e.pageQuery.page-1,e.initData())}).catch(function(t){console.log(t)})}).catch(function(){console.log("cancel")})},subject:function(t){this.companyId=t,this.dialogSubjectVisible=!0},saveCompany:function(t){var e=this;this.$refs[t].validate(function(t){t&&window.axios.post("".concat(window.adminHost,"/admin/manual/company/add"),e.companyFormData).then(function(t){var a=t.data;a.error_code?e.$message.error("保存失败"):(e.$message.success("保存成功"),e.dialogCompanyVisible=!1,e.initData())}).catch(function(t){console.log(t)})})},addBusiness:function(t){this.companyId=t,this.businessData={},this.dialogBusinessVisible=!0},editBusiness:function(t,e){this.companyId=e,this.businessData=t,this.dialogBusinessVisible=!0},delBusiness:function(t,e){var a=this;this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.axios.delete("".concat(window.adminHost,"/admin/manual/business/").concat(t.id)).then(function(t){var e=t.data;e.error_code?a.$message.error("删除失败"):(a.$message.success("删除成功"),a.initData())}).catch(function(t){console.log(t)})}).catch(function(){console.log("cancel")})},saveBusiness:function(){this.dialogBusinessVisible=!1,this.initData()},toSaveAnswer:function(t){window.open("/shou_gong_zhang/#/home/".concat(t))},handleSubjectDrag:function(){this.$refs["subjectDiv"].blur()},handleCompanyDrag:function(){this.$refs["divCompany"].blur()},handleBusinessDrag:function(){this.$refs["businessDiv"].blur()},changePageIndex:function(t){this.pageQuery.page=t,this.initData()}}},I=S,C=(a("6965"),a("d205"),Object(p["a"])(I,i,n,!1,null,"1142bf38",null));e["default"]=C.exports},"2c7b":function(t,e,a){"use strict";var i=a("66f9"),n=a.n(i);n.a},"2fdb":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d2c8"),r="includes";i(i.P+i.F*a("5147")(r),"String",{includes:function(t){return!!~n(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"301d":function(t,e,a){},"3f0d":function(t,e,a){},"49ea":function(t,e,a){},5147:function(t,e,a){var i=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},"520a":function(t,e,a){"use strict";var i=a("0bfb"),n=RegExp.prototype.exec,r=String.prototype.replace,o=n,s="lastIndex",l=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[s]||0!==e[s]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(o=function(t){var e,a,o,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",i.call(d))),l&&(e=d[s]),o=n.call(d,t),l&&o&&(d[s]=d.global?o.index+o[0].length:e),c&&o&&o.length>1&&r.call(o[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)}),o}),t.exports=o},"5dbc":function(t,e,a){var i=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var r,o=e.constructor;return o!==a&&"function"==typeof o&&(r=o.prototype)!==a.prototype&&i(r)&&n&&n(t,r),t}},"5f1b":function(t,e,a){"use strict";var i=a("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var r=a.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"66f9":function(t,e,a){},6762:function(t,e,a){"use strict";var i=a("5ca1"),n=a("c366")(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},6965:function(t,e,a){"use strict";var i=a("301d"),n=a.n(i);n.a},"6a3f":function(t,e,a){"use strict";var i=a("49ea"),n=a.n(i);n.a},7954:function(t,e,a){},"8b97":function(t,e,a){var i=a("d3f4"),n=a("cb7c"),r=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,a){return r(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:r}},9093:function(t,e,a){var i=a("ce10"),n=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},a481:function(t,e,a){"use strict";var i=a("cb7c"),n=a("4bf8"),r=a("9def"),o=a("4588"),s=a("0390"),l=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,g){return[function(i,n){var r=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,r,n):a.call(String(r),i,n)},function(t,e){var n=g(a,t,this,e);if(n.done)return n.value;var d=i(t),p=String(this),f="function"===typeof e;f||(e=String(e));var v=d.global;if(v){var b=d.unicode;d.lastIndex=0}var y=[];while(1){var w=l(d,p);if(null===w)break;if(y.push(w),!v)break;var _=String(w[0]);""===_&&(d.lastIndex=s(p,r(d.lastIndex),b))}for(var x="",D=0,j=0;j<y.length;j++){w=y[j];for(var S=String(w[0]),I=c(u(o(w.index),p.length),0),C=[],k=1;k<w.length;k++)C.push(m(w[k]));var E=w.groups;if(f){var $=[S].concat(C,I,p);void 0!==E&&$.push(E);var z=String(e.apply(void 0,$))}else z=h(S,p,I,C,E,e);I>=D&&(x+=p.slice(D,I)+z,D=I+S.length)}return x+p.slice(D)}];function h(t,e,i,r,o,s){var l=i+t.length,c=r.length,u=f;return void 0!==o&&(o=n(o),u=p),a.call(s,u,function(a,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":s=o[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>c){var p=d(u/10);return 0===p?a:p<=c?void 0===r[p-1]?n.charAt(1):r[p-1]+n.charAt(1):a}s=r[u-1]}return void 0===s?"":s})}})},aa77:function(t,e,a){var i=a("5ca1"),n=a("be13"),r=a("79e5"),o=a("fdef"),s="["+o+"]",l="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(t,e,a){var n={},s=r(function(){return!!o[t]()||l[t]()!=l}),c=n[t]=s?e(p):o[t];a&&(n[a]=c),i(i.P+i.F*s,"String",n)},p=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},aae3:function(t,e,a){var i=a("d3f4"),n=a("2d95"),r=a("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==n(t))}},b0c5:function(t,e,a){"use strict";var i=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},c5f6:function(t,e,a){"use strict";var i=a("7726"),n=a("69a8"),r=a("2d95"),o=a("5dbc"),s=a("6a99"),l=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,f="Number",m=i[f],g=m,h=m.prototype,v=r(a("2aeb")(h))==f,b="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():p(e,3);var a,i,n,r=e.charCodeAt(0);if(43===r||45===r){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var o,l=e.slice(2),c=0,u=l.length;c<u;c++)if(o=l.charCodeAt(c),o<48||o>n)return NaN;return parseInt(l,i)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(v?l(function(){h.valueOf.call(a)}):r(a)!=f)?o(new g(y(e)),a,m):y(e)};for(var w,_=a("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;_.length>x;x++)n(g,w=_[x])&&!n(m,w)&&d(m,w,u(g,w));m.prototype=h,h.constructor=m,a("2aba")(i,f,m)}},cd1c:function(t,e,a){var i=a("e853");t.exports=function(t,e){return new(i(t))(e)}},d205:function(t,e,a){"use strict";var i=a("3f0d"),n=a.n(i);n.a},d2c8:function(t,e,a){var i=a("aae3"),n=a("be13");t.exports=function(t,e,a){if(i(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(t))}},e853:function(t,e,a){var i=a("d3f4"),n=a("1169"),r=a("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),i(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-7787cca0.0b653294.js.map