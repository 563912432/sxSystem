(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b275d26"],{1287:function(t,e,a){"use strict";var n=a("7287"),o=a.n(n);o.a},"3b50":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mb-5 company-top"},[t._m(0),a("el-button",{staticClass:"mr-10",attrs:{size:"mini",type:"success"},on:{click:t.addcompany}},[t._v("企业新增")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCompanyadd,expression:"showCompanyadd"}]},[a("Popups",{attrs:{title:"企业数据设置"}},[a("div",{attrs:{slot:"close"},on:{click:t.showCompanyaddoff},slot:"close"},[a("el-icon",{staticClass:"el-icon-close"})],1),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"preset"},[a("div",{staticClass:"table-content",staticStyle:{height:"458px","overflow-y":"auto",padding:"20px 20px"}},[a("el-form",{ref:"companyInfo",staticClass:"companyInfo",attrs:{model:t.companyInfo,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{prop:"trade_name",label:"企业名称"}},[a("el-input",{attrs:{type:"text",placeholder:"例：山东问云机械有限公司"},model:{value:t.companyInfo.trade_name,callback:function(e){t.$set(t.companyInfo,"trade_name",e)},expression:"companyInfo.trade_name"}})],1),a("el-form-item",{attrs:{prop:"firm_code",label:"纳税人识别号"}},[a("el-input",{attrs:{type:"text",placeholder:"例：91370305755666003U"},model:{value:t.companyInfo.firm_code,callback:function(e){t.$set(t.companyInfo,"firm_code",e)},expression:"companyInfo.firm_code"}})],1),a("el-form-item",{attrs:{label:"省份"}},[a("el-input",{attrs:{type:"text",placeholder:"例：山东"},model:{value:t.companyInfo.province,callback:function(e){t.$set(t.companyInfo,"province",e)},expression:"companyInfo.province"}})],1),a("el-form-item",{attrs:{label:"默认初始用户名"}},[a("el-input",{attrs:{type:"text",placeholder:"例：管理员"},model:{value:t.companyInfo.user_name,callback:function(e){t.$set(t.companyInfo,"user_name",e)},expression:"companyInfo.user_name"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"text",placeholder:"例：123456"},model:{value:t.companyInfo.password,callback:function(e){t.$set(t.companyInfo,"password",e)},expression:"companyInfo.password"}})],1),a("el-form-item",{attrs:{label:"口令"}},[a("el-input",{attrs:{type:"text",placeholder:"例：12345678"},model:{value:t.companyInfo.token,callback:function(e){t.$set(t.companyInfo,"token",e)},expression:"companyInfo.token"}})],1),a("el-form-item",{attrs:{label:"默认初始用户备注"}},[a("el-input",{attrs:{type:"text",placeholder:"例：备注"},model:{value:t.companyInfo.remark,callback:function(e){t.$set(t.companyInfo,"remark",e)},expression:"companyInfo.remark"}})],1),a("el-form-item",{attrs:{label:"公司地址"}},[a("el-input",{attrs:{type:"text",placeholder:"例：山东省淄博市张店区德胜路85号"},model:{value:t.companyInfo.address,callback:function(e){t.$set(t.companyInfo,"address",e)},expression:"companyInfo.address"}})],1),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{type:"text",placeholder:"例：3918359"},model:{value:t.companyInfo.telno,callback:function(e){t.$set(t.companyInfo,"telno",e)},expression:"companyInfo.telno"}})],1),a("el-form-item",{attrs:{label:"开户行地址"}},[a("el-input",{attrs:{type:"text",placeholder:"例：中国建设银行德胜路支行"},model:{value:t.companyInfo.bank_address,callback:function(e){t.$set(t.companyInfo,"bank_address",e)},expression:"companyInfo.bank_address"}})],1),a("el-form-item",{attrs:{label:"银行账号"}},[a("el-input",{attrs:{type:"text",placeholder:"例：银行账号"},model:{value:t.companyInfo.bank_code,callback:function(e){t.$set(t.companyInfo,"bank_code",e)},expression:"companyInfo.bank_code"}})],1),a("el-form-item",{attrs:{label:"专票代码"}},[a("el-input",{attrs:{type:"text",placeholder:"长度为10位 例：3700114140"},model:{value:t.companyInfo.zhuan_code,callback:function(e){t.$set(t.companyInfo,"zhuan_code",e)},expression:"companyInfo.zhuan_code"}})],1),a("el-form-item",{attrs:{label:"专票代码起始号码"}},[a("el-input",{attrs:{type:"text",placeholder:"长度为8位 例：3700114140"},model:{value:t.companyInfo.zhuan_code_start,callback:function(e){t.$set(t.companyInfo,"zhuan_code_start",e)},expression:"companyInfo.zhuan_code_start"}})],1),a("el-form-item",{attrs:{label:"专票代码结束号码"}},[a("el-input",{attrs:{type:"text",placeholder:"例：3700114140"},model:{value:t.companyInfo.zhuan_code_end,callback:function(e){t.$set(t.companyInfo,"zhuan_code_end",e)},expression:"companyInfo.zhuan_code_end"}})],1),a("el-form-item",{attrs:{label:"专票限额"}},[a("el-input",{attrs:{type:"text",placeholder:"例：10000.00"},model:{value:t.companyInfo.zhuan_xiane,callback:function(e){t.$set(t.companyInfo,"zhuan_xiane",e)},expression:"companyInfo.zhuan_xiane"}})],1),a("el-form-item",{attrs:{label:"普票代码"}},[a("el-input",{attrs:{type:"text",placeholder:"长度为10位 例：3700114140"},model:{value:t.companyInfo.po_code,callback:function(e){t.$set(t.companyInfo,"po_code",e)},expression:"companyInfo.po_code"}})],1),a("el-form-item",{attrs:{label:"普票代码起始号码"}},[a("el-input",{attrs:{type:"text",placeholder:"长度为8位 例：3700114140"},model:{value:t.companyInfo.po_code_start,callback:function(e){t.$set(t.companyInfo,"po_code_start",e)},expression:"companyInfo.po_code_start"}})],1),a("el-form-item",{attrs:{label:"普票代码结束号码"}},[a("el-input",{attrs:{type:"text",placeholder:"例：3700114140"},model:{value:t.companyInfo.po_code_end,callback:function(e){t.$set(t.companyInfo,"po_code_end",e)},expression:"companyInfo.po_code_end"}})],1),a("el-form-item",{attrs:{label:"普票限额"}},[a("el-input",{attrs:{type:"text",placeholder:"例：10000.00"},model:{value:t.companyInfo.po_xiane,callback:function(e){t.$set(t.companyInfo,"po_xiane",e)},expression:"companyInfo.po_xiane"}})],1),a("el-form-item",{attrs:{prop:"remark",label:"开票时间"}},[a("el-input",{attrs:{type:"text",placeholder:"例：2018-04-01"},model:{value:t.companyInfo.kaipiao_time,callback:function(e){t.$set(t.companyInfo,"kaipiao_time",e)},expression:"companyInfo.kaipiao_time"}})],1),a("el-form-item",{attrs:{prop:"remark",label:"领票时间"}},[a("el-input",{attrs:{type:"text",placeholder:"例：2018-04-01"},model:{value:t.companyInfo.lingpiao_time,callback:function(e){t.$set(t.companyInfo,"lingpiao_time",e)},expression:"companyInfo.lingpiao_time"}})],1),a("el-form-item",{attrs:{prop:"remark",label:"锁死日期"}},[a("el-input",{attrs:{type:"text",placeholder:"例：2018-04-01"},model:{value:t.companyInfo.lock_day,callback:function(e){t.$set(t.companyInfo,"lock_day",e)},expression:"companyInfo.lock_day"}})],1),a("el-form-item",{attrs:{prop:"remark",label:"上次报税日期"}},[a("el-input",{attrs:{type:"text",placeholder:"例：2018-04-01"},model:{value:t.companyInfo.baoshui_day_start,callback:function(e){t.$set(t.companyInfo,"baoshui_day_start",e)},expression:"companyInfo.baoshui_day_start"}})],1),a("el-form-item",{attrs:{prop:"remark",label:"抄税起始日期"}},[a("el-input",{attrs:{type:"text",placeholder:"例：2018-04-01"},model:{value:t.companyInfo.chaoshui_day_start,callback:function(e){t.$set(t.companyInfo,"chaoshui_day_start",e)},expression:"companyInfo.chaoshui_day_start"}})],1),a("el-form-item",{attrs:{prop:"remark",label:"红字流水起始号码"}},[a("el-input",{attrs:{type:"text",placeholder:"例：661558640110161227158056。长度14位，不以0开头"},model:{value:t.companyInfo.red_code_start,callback:function(e){t.$set(t.companyInfo,"red_code_start",e)},expression:"companyInfo.red_code_start"}})],1),a("el-form-item",{attrs:{prop:"remark",label:"是否小规模企业"}},[a("el-input",{attrs:{type:"text",placeholder:"例：否"},model:{value:t.companyInfo.is_mini_company,callback:function(e){t.$set(t.companyInfo,"is_mini_company",e)},expression:"companyInfo.is_mini_company"}})],1),a("div",{staticClass:"text-center"},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.saveCompanyInfo("companyInfo")}}},[t._v("保 存")]),a("el-button",{staticClass:"green-btn",staticStyle:{"margin-left":"8px"},attrs:{size:"mini"},on:{click:function(e){return t.handleReset("companyInfo")}}},[t._v("重 置\n                ")])],1)],1)],1)])])])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isCompanyHave,expression:"isCompanyHave"}],staticClass:"company-info"},[a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"float-left company-title"},[a("strong",{staticClass:"company-name"},[t._v("企业名称："+t._s(t.companyNow.trade_name))])]),a("div",{staticClass:"float-right text-center company-operating"},[a("a",{staticClass:"mr-10",on:{click:t.addBusiness}},[t._v("新增业务")]),a("a",{staticClass:"mr-10",on:{click:t.toPracticalAnswer}},[t._v("答案绑定")]),a("a",{staticClass:"mr-10",on:{click:t.editCompany}},[t._v("编辑")]),a("a",{staticClass:"mr-10",on:{click:t.deleteCompany}},[t._v("删除")])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isCompanyHave,expression:"isCompanyHave"}],staticClass:"table-responsive"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,size:"small","header-row-class-name":"tableHead","cell-class-name":"business-cell"}},[t._l(t.tableTitle,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.key,label:t.title,width:t.width}})}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"mh-5",on:{click:function(a){return t.editorBusiness(e.$index,e.row)}}},[t._v("编辑")]),a("a",{staticClass:"mh-5",on:{click:function(a){return t.deleteBusiness(e.$index,e.row)}}},[t._v("删除")])]}}])})],2)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isCompanyHave,expression:"isCompanyHave"}],staticClass:"mt-15 text-center"},[a("el-pagination",{staticClass:"text-center",attrs:{layout:"prev, pager, next",total:t.dataCount,"page-size":1},on:{"current-change":t.changepage}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showBusinessadd,expression:"showBusinessadd"}]},[a("Popups",{attrs:{title:"业务数据设置",width:"500",height:"450"}},[a("div",{attrs:{slot:"close"},on:{click:t.showBusinessaddoff},slot:"close"},[a("el-icon",{staticClass:"el-icon-close"})],1),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"preset"},[a("div",{staticClass:"table-content",staticStyle:{height:"450px","overflow-y":"auto",padding:"20px"}},[a("el-form",{ref:"businessInfo",staticClass:"companyInfo",attrs:{"label-width":"80px",model:t.businessInfo,rules:t.companyRuleValidate}},[a("el-form-item",{attrs:{prop:"content",label:"业务内容"}},[a("el-input",{attrs:{type:"textarea",placeholder:"业务描述"},model:{value:t.businessInfo.content,callback:function(e){t.$set(t.businessInfo,"content",e)},expression:"businessInfo.content"}})],1),a("el-form-item",{attrs:{prop:"text_parse",label:"文字解析"}},[a("el-input",{attrs:{type:"textarea",placeholder:"文字解析"},model:{value:t.businessInfo.text_parse,callback:function(e){t.$set(t.businessInfo,"text_parse",e)},expression:"businessInfo.text_parse"}})],1),a("el-form-item",{attrs:{label:"视频解析"}},[a("el-upload",{attrs:{action:"//jsonplaceholder.typicode.com/posts/"}},[a("el-button",{attrs:{type:"success",size:"mini"}},[t._v("\n                    上传\n                    "),a("i",{staticClass:"el-icon-view el-icon--right"})])],1)],1),a("el-form-item",{attrs:{label:"材料上传"}},[a("el-upload",{attrs:{action:"//jsonplaceholder.typicode.com/posts/"}},[a("el-button",{attrs:{type:"success",size:"mini"}},[t._v("\n                    上传\n                    "),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),a("div",{staticClass:"text-center",staticStyle:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)"}},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.submitBusiness("businessInfo")}}},[t._v("保 存")]),a("el-button",{staticClass:"green-btn",staticStyle:{"margin-left":"8px"},attrs:{size:"mini"}},[t._v("重 置")])],1)],1)],1)])])])],1),t.isCompanyHave?t._e():a("span",{staticClass:"el-table__empty-text",staticStyle:{position:"relative",left:"48%",transform:"translateX(-50%)"}},[t._v("暂无数据")])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-span fl mr-20"},[a("span",[t._v("开票管理")])])}],s=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"model",style:"width:"+t.width+"px;height:"+t.height+"px"},[a("div",{staticClass:"title"},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))])]),a("div",{staticClass:"close"},[t._t("close")],2),a("div",{staticClass:"content"},[t._t("content")],2),t._t("buttons")],2)])},c=[],l={props:["title","width","height"],data:function(){return{}},created:function(){},computed:{},methods:{}},r=l,p=(a("1287"),a("2877")),m=Object(p["a"])(r,i,c,!1,null,"4481b346",null),d=m.exports,u={showCompanyadd:!1,showBusinessadd:!1,companyStatus:!0,businessStatus:!0},f={showCompanyaddoff:function(){this.showCompanyadd=!1},addcompany:function(){this.showCompanyadd=!0},showBusinessaddoff:function(){this.showBusinessadd=!1},addBusiness:function(){this.showBusinessadd=!0}},y=(a("a481"),a("6b54"),a("28a5"),{getCurrentMonthLastDay:function(t){t=this.strToDate(t);var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var n=new Date(e,a,0);return e+"-"+a+"-"+n.getDate()},getNextMonth:function(t){var e=t.split("-"),a=e[0],n=e[1],o=e[2],s=new Date(a,n,0);s=s.getDate();var i=a,c=parseInt(n)+1;13==c&&(i=parseInt(i)+1,c=1);var l=o,r=new Date(i,c,0);r=r.getDate(),l>r&&(l=r),c<10&&(c="0"+c);var p=i+"-"+c+"-"+l;return p},dateToString:function(t){var e=t.getFullYear(),a=(t.getMonth()+1).toString(),n=t.getDate().toString();1===a.length&&(a="0"+a),1===n.length&&(n="0"+n);var o=e+"-"+a+"-"+n;return o},strToDate:function(t){var e=new Date(Date.parse(t.replace(/-/g,"/")));return e}}),h=a("6279");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(a,!0).forEach(function(e){Object(s["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var v={name:"Material",components:{Popups:d},data:function(){return b({},u,{businessInfo:{},practicalAnswer:!0,rules:{trade_name:[{required:!0,message:"必填项必须要填写",trigger:"blur"}],firm_code:[{required:!0,message:"必填项必须要填写",trigger:"blur"}]},index:0,tableTitle:[{title:"业务内容",key:"content"}],tableData:[],ajaxHistoryData:[],dataCount:1,pageSize:1,page:1,historyData:[],companyNow:{},tableCode:"",iscompanyEditor:!1,companyInfo:{},companyRuleValidate:{content:[{required:!0,message:"必填项不能为空",trigger:"blur"}],text_parse:[{required:!0,message:"必填项不能为空",trigger:"blur"}]},isCompanyHave:!1})},created:function(){this.getInfo(1)},computed:{},watch:{showBusinessadd:function(t){t||(this.businessInfo=this.$options.data().businessInfo)},showCompanyadd:function(t){t||(this.companyInfo=this.$options.data().companyInfo,this.companyStatus=!0)},companyNow:function(t){this.isCompanyHave=!!t}},methods:b({},f,{},y,{editCompany:function(){this.showCompanyadd=!0,this.companyStatus=!1,this.companyInfo=b({},this.companyNow)},deleteCompany:function(){var t=this;app._delete(this,"admin/kp/company/del/".concat(this.companyNow.id),{id:this.companyNow.id},function(e){t.getInfo(1)})},getInfo:function(t){var e=this;app._post(this,"admin/kp/company/list?page_size=1&page="+t,{},function(t){0!==t.data.data.data.length?(e.companyNow=t.data.data.data[0],e.tableData=t.data.data.data[0].business,e.dataCount=t.data.data.total):e.companyNow=!1})},saveCompanyInfo:function(t){var e=this,a={province:"山东",user_name:"管理员",password:"123456",token:"12345678",remark:"备注",address:"山东省淄博市张店区",telno:"3918359",bank_address:"中国建设银行德胜路支行",bank_code:"622848154789651415687",zhuan_code:"3700114140",zhuan_code_start:"3700114140",zhuan_code_end:"3700114240",zhuan_xiane:"10000.00",po_code:"5500114140",po_code_start:"03279189",po_code_end:"03279213",po_xiane:"10000.00",kaipiao_time:"2018-04-01",lingpiao_time:"2018-04-15",lock_day:"2018-05-01",baoshui_day_start:"2018-03-01",chaoshui_day_start:"2018-05-01",red_code_start:"6615011016",is_mini_company:"否"},n=b({},this.companyInfo);n=Object(h["c"])(n,a),this.$refs[t].validate(function(t){t?e.companyStatus?app._post(e,"admin/kp/company/add",n,function(t){e.showCompanyadd=!1,e.getInfo(1)}):app._post(e,"admin/kp/company/add",n,function(t){e.companyNow=e.companyInfo,e.showCompanyadd=!1,e.getInfo(e.page)}):e.$message.error("提交失败！")})},submitBusiness:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a=b({},e.businessInfo);a.trade_id=e.companyNow.id,e.businessStatus?app._post(e,"admin/kp/business",a,function(t){e.showBusinessadd=!1,e.getInfo(e.page)}):app._post(e,"admin/kp/business",a,function(t){e.$set(e.tableData,e.index,b({},a)),e.showBusinessadd=!1})}else console.log(1)})},editorBusiness:function(t){this.index=t,this.businessStatus=!1,this.showBusinessadd=!0,this.businessInfo=b({},this.$data.tableData[t])},deleteBusiness:function(t){var e=this;app._delete(this,"admin/kp/business/".concat(this.tableData[t].id),{},function(a){e.tableData.splice(t,1)})},toPracticalAnswer:function(){window.open("/kaipiao/#/login/teacher/".concat(this.companyNow.id))},handleReset:function(t){this.$refs[t].resetFields()},timeOver:function(){var t=this.companyInfo.shenbao_month+"-01";this.strToDate(t);this.companyInfo.income_start_time=t,this.companyInfo.income_end_time=this.getCurrentMonthLastDay(t),this.companyInfo.shenbao_time=this.getCurrentMonthLastDay(t),this.companyInfo.jiaokuan_time=this.getNextMonth(t),this.companyInfo.youxiao_start_time=t,this.companyInfo.youxiao_end_time=this.getCurrentMonthLastDay(t),this.companyInfo.jiaokuan_end_time=this.companyInfo.jiaokuan_time.substring(0,8)+"15"},changepage:function(t){this.page=t,this.getInfo(t)}})},I=v,x=(a("cdb0"),a("52f8"),Object(p["a"])(I,n,o,!1,null,"bf593e4c",null));e["default"]=x.exports},4036:function(t,e,a){},"454f":function(t,e,a){a("46a7");var n=a("584a").Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},"46a7":function(t,e,a){var n=a("63b6");n(n.S+n.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"52f8":function(t,e,a){"use strict";var n=a("7d55"),o=a.n(n);o.a},7287:function(t,e,a){},"7d55":function(t,e,a){},"7f7f":function(t,e,a){var n=a("86cc").f,o=Function.prototype,s=/^\s*function ([^ (]*)/,i="name";i in o||a("9e1e")&&n(o,i,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},"85f2":function(t,e,a){t.exports=a("454f")},"8e6e":function(t,e,a){var n=a("5ca1"),o=a("990b"),s=a("6821"),i=a("11e9"),c=a("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,n=s(t),l=i.f,r=o(n),p={},m=0;while(r.length>m)a=l(n,e=r[m++]),void 0!==a&&c(p,e,a);return p}})},"990b":function(t,e,a){var n=a("9093"),o=a("2621"),s=a("cb7c"),i=a("7726").Reflect;t.exports=i&&i.ownKeys||function(t){var e=n.f(s(t)),a=o.f;return a?e.concat(a(t)):e}},bd86:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a("85f2"),o=a.n(n);function s(t,e,a){return e in t?o()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},cdb0:function(t,e,a){"use strict";var n=a("4036"),o=a.n(n);o.a},f1ae:function(t,e,a){"use strict";var n=a("86cc"),o=a("4630");t.exports=function(t,e,a){e in t?n.f(t,e,o(0,a)):t[e]=a}}}]);
//# sourceMappingURL=chunk-8b275d26.f5950e7f.js.map